<!DOCTYPE html>
<html lang="en">

<head>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8">


	<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">

	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css">
	<link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
</head>

<body>

	<div class="container">
		<br>
		<p class="text-center"></p>

		<div class="row justify-content-center">
			<div class="col-md-6">
				<div class="card">
					<header class="card-header">
						<!-- <a href="javascript:;" class="float-right btn btn-outline-primary mt-1 ch">Log in</a>
						 -->
						<!-- <h4 class="card-title mt-2">Sign up</h4>  -->
						<input type="checkbox" checked data-toggle="toggle" data-width="100">
					</header>
					<article class="card-body">
						<form action="/get/registered" method="POST" id="sign_up_form">
							<div class="form-row">
								<div class="col form-group">
									<label class="r-1">First name </label>
									<input type="text" name="f_name" class="form-control" required placeholder="">
								</div> <!-- form-group end.// -->
								<div class="col form-group">
									<label class="r-1">Last name</label>
									<input type="text" name="l_name" class="form-control" required placeholder=" ">
								</div> <!-- form-group end.// -->
							</div> <!-- form-row end.// -->
							<div class="form-group">
								<label>Email address</label>
								<input type="email" name="email" class="form-control email" required placeholder="">
								<small class="form-text text-muted">We'll never share your email with anyone
									else.</small>
							</div> <!-- form-group end.// -->
							<div class="form-group">
								<label class="form-check form-check-inline r-1">
									<input class="form-check-input" type="radio" name="gender" value="male" required>
									<span class="form-check-label"> Male </span>
								</label>
								<label class="form-check form-check-inline r-1">
									<input class="form-check-input" type="radio" name="gender" value="female" required>
									<span class="form-check-label"> Female</span>
								</label>
							</div> <!-- form-group end.// -->
							<div class="form-row">
								<!-- <div class="form-group col-md-6">
		  <label>City</label>
		  <input type="text" class="form-control">
		</div>  -->
								<!-- form-group end.// -->
								<div class="form-group col-md-6">
									<label class="r-1">Roles</label>
									<select required name="roles" id="inputState" class="form-control">
										<option>Select roles</option>
										<% for (var i = 0; i < roles.length; i++){ %>
										<option name="" value="<%= roles[i].id %>" required><%= roles[i].roles %>
										</option> <% } %>
									</select>
								</div> <!-- form-group end.// -->
							</div> <!-- form-row.// -->
							<div class="form-group">
								<label>Create password</label>
								<input name="password" class="form-control password" required type="password">
							</div> <!-- form-group end.// -->
							<div class="form-group">
								<button type="submit" class="btn btn-primary btn-block submit">
									Register </button>
							</div> <!-- form-group// -->
							<small class="text-muted">By clicking the 'Sign Up' button, you confirm that you accept our
								<br> Terms of use and Privacy Policy.</small>
						</form>
					</article> <!-- card-body end .// -->
					<div class="border-top card-body text-center">Have an account? <a href="javascript:;">Log In</a>
					</div>
				</div> <!-- card.// -->
			</div> <!-- col.//-->

		</div> <!-- row.//-->


	</div>
	<!--container end.//-->

	<br><br>


	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
	<script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
	<!------ Include the above in your HEAD tag ---------->

	<script>

		$(document).ready(function () {
			//$('form').html("<div class='form-row'> <div class='col form-group'> <label class='r-1'>First name </label> <input type='text' name='f_name' class='form-control' required placeholder=''> </div>  <div class='col form-group'> <label class='r-1'>Last name</label> <input type='text' name='l_name' class='form-control' required placeholder=' '> </div>  </div>  <div class='form-group'> <label>Email address</label> <input type='email' name='email' class='form-control email' required placeholder=''> <small class='form-text text-muted'>We'll never share your email with anyone else.</small> </div>  <div class='form-group'> <label class='form-check form-check-inline r-1'> <input class='form-check-input' type='radio' name='gender' value='male' required> <span class='form-check-label'> Male </span> </label> <label class='form-check form-check-inline r-1'> <input class='form-check-input' type='radio' name='gender' value='female' required> <span class='form-check-label'> Female</span> </label> </div>  <div class='form-row'>   <div class='form-group col-md-6'> <label class='r-1'>Roles</label> <select required name='roles' id='inputState' class='form-control'> <option>Select roles</option> <% for (var i = 0; i < roles.length; i++){ %> <option name='' value='<%= roles[i].id %>' required><%= roles[i].roles %> </option> <% } %> </select> </div>  </div>  <div class='form-group'> <label>Create password</label> <input name='password' class='form-control password' required type='password'> </div>  <div class='form-group'> <button type='submit' class='btn btn-primary btn-block submit'> Register </button> </div>  <small class='text-muted'>By clicking the 'Sign Up' button, you confirm that you accept our <br> Terms of use and Privacy Policy.</small>");
			var singup_form_html = $("form").html();
			var login_form_html = "<div class='form-row'> <div class='col form-group'> </div>  <div class='col form-group'> </div>  </div>  <div class='form-group'> <label>Email address</label> <input type='email' name='email' class='form-control email-login' required='' placeholder=''> <small class='form-text text-muted'>We'll never share your email with anyone else.</small> </div>  <div class='form-group'> </div>  <div class='form-row'>   <div class='form-group col-md-6'> </div>  </div>  <div class='form-group'> <label>Create password</label> <input name='password' class='form-control password' required='' type='password'> </div>  <div class='form-group'> <button type='submit' class='btn btn-primary btn-block submit'>Login</button> </div>  <small class='text-muted'>By clicking the 'Sign Up' button, you confirm that you accept our <br> Terms of use and Privacy Policy.</small>";

			var a = '<span class="glyphicon glyphicon-align-left" aria-hidden="true"></span>';
			$('.toggle-on').html("login");
			$('.toggle-off').html("Sigin up");

			//$('body').on('focusout', 'input[type=email]', function () {
			$('body').on('focusout', '.email', function () {
				//var email = $('input[type=email]').val();
				var email = $('.email').val();

				$.ajax({
					url: `/isemail/${email}`,
					dataType: 'json',
					type: 'post',
					success: function (response) {

						if (response.db_result == null) {

							$('.email').css('border-color', '#ced4da');
							$('.submit').prop('disabled', false);

							// $('input[type=email]').css('border-color', '#ced4da');
							// $(':input[type="submit"]').prop('disabled', false);

						}
						if (response.db_result != null) {

							$('.email').css('border-color', 'red');
							$('.submit').prop('disabled', true);
							alert('This emai is already exist.')

							// $('input[type=email]').css('border-color', 'red');
							// $(':input[type="submit"]').prop('disabled', true);
							// alert('This emai is already exist.')

						}

					},
					error: function (error) {
						console.log(error);
					}

				})



			})



			$('.toggle-on').click(function () {
				debugger
				//$('input').val("")
				//$("input[name='f_name'],input[name='l_name'],input[name='gender'],select").remove()
				//$('.r-1').remove()
				//$(':input[type="submit"]').html("Login")
				$('form').attr('action', '/api/login')
				//$('.toggle-on').html("Sign up ");
				//$('input[type=email]').addClass("email-login");
				//$('input[type=email]').removeClass("email");
				//// $('form').appendTo(login_form_html);
				//$('.submit').prop('disabled', false);
				//$('.input').css('border-color', '#ced4da');
				$('form').html(login_form_html)
			})

			$('.toggle-off').click(function () {
				debugger
				//$('input').val("")
				//$("input[name='f_name'],input[name='l_name'],input[name='gender'],select").show()
				//$('.r-1').show()
				//$(':input[type="submit"]').html("Register")
				$('form').attr('action', '/get/registered')
				//$('.toggle-off').html("Login");
				//$('input[type=email]').addClass("email");
				//$('input[type=email]').removeClass("email-login");
				//// $('form').replaceWith(singup_form_html);
				//$('.submit').prop('disabled', false);
				//$('input').css('border-color', '#ced4da');
				$('form').html(singup_form_html)
			})



			// $('input[type=submit]').click(function (e) {
			// 	e.preventDefault();
			// 	$.ajax({
			// 		url: `/api/login${email}`,
			// 		dataType: 'json',
			// 		type: 'post',
			// 		success: function (response) {

			// 		},
			// 		error: function (error) {
			// 			console.log(error);
			// 		}

			// 	})



			// })



		})//document.ready 
	</script>
</body>

</html>